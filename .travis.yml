language: python

sudo: false

cache:
  - pip

python:
 - "2.7"
 - "3.5"

env:
 - DJANGO_VERSION=1.9.7 db_name=calaccess_website db_user=postgres db_password='' rds_host=localhost
 - DJANGO_VERSION=1.10a1 db_name=calaccess_website db_user=postgres db_password='' rds_host=localhost

install:
 - pip install -r requirements.txt
 - pip uninstall -y Django
 - pip install -q Django==$DJANGO_VERSION

before_script:
  - psql -c 'create database calaccess_website;' -U postgres
  - cat > .env
  - [DEV]
  - aws_access_key_id = 
  - aws_secret_access_key = 
  - aws_region_name = 
  - key_name = 
  - db_name = 
  - db_user = 
  - db_password = 
  - s3_archived_data_bucket = 
  - s3_baked_content_bucket = 
  - email_user = 
  - email_password = 
  - rds_host = 

script:
  - make test

after_success:
 - coveralls
